# Description: OpenType text shaping engine
# URL:         https://harfbuzz.github.io/
# Depends on:  cairo libpcre2

name=harfbuzz
version=11.5.1
release=1
source=https://github.com/$name/$name/archive/$version/$name-$version.tar.gz

build() {
	# Notes:
	# - graphite2=disabled: avoids texlive/libreoffice dependency on
	#   system harfbuzz
	# - docs=disabled: avoids gtk-doc requirement
	# - glib=enabled: required for building pango

	meson setup build $name-$version   \
		--prefix=/usr              \
		--buildtype=plain          \
		--wrap-mode=nodownload     \
		-D b_lto=true              \
		-D b_pie=true              \
		-D glib=enabled            \
		-D benchmark=disabled      \
		-D docs=disabled           \
		-D graphite=auto           \
		-D graphite2=disabled      \
		-D tests=disabled          \
		-D icu=disabled            \
		-D gobject=disabled        \
		-D introspection=disabled  \

	ninja -C build -j ${JOBS:-1} -v
	DESTDIR=$PKG ninja -C build install
}
