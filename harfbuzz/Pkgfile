# Description: OpenType text shaping engine
# URL:         https://harfbuzz.github.io/
# Depends on:  cairo libpcre2

# Maintainer notes on dependencies:
#   cairo          required (optional upstream, enforced here)
#   glib           enabled for building pango
#   graphite2      disabled (graphite2)
#   icu            disabled (icu)
#   docs           disabled (gtk-doc)
#   introspection  disabled (glib-introspection)

name=harfbuzz
version=12.3.0
release=1
source=https://github.com/$name/$name/archive/$version/$name-$version.tar.gz

build() {
	meson setup build $name-$version \
		--prefix=/usr \
		--buildtype=plain \
		--wrap-mode=nodownload \
		-D b_lto=true \
		-D b_pie=true \
		-D glib=enabled \
		-D benchmark=disabled \
		-D docs=disabled \
		-D graphite=auto \
		-D graphite2=disabled \
		-D tests=disabled \
		-D icu=disabled \
		-D gobject=disabled \
		-D introspection=disabled \

	ninja -C build -j ${JOBS:-1} -v
	DESTDIR=$PKG ninja -C build install
}
