# Description: XSL Transformations library
# URL:         http://xmlsoft.org/XSLT/
# Depends on:  libxml2

name=libxslt
version=1.1.45
release=1
source=https://gitlab.gnome.org/GNOME/$name/-/archive/v$version/$name-v$version.tar.bz2

build() {
	mkdir build; cd build

	NOCONFIGURE=1 ../$name-v$version/autogen.sh

	# --without-crypto: otherwise requires libgcrypt
	../$name-v$version/configure \
		--prefix=/usr \
		--with-plugins \
		--without-crypto \
		--without-debug \
		--without-debugger \
		--without-profiler \
		--without-python \

	# fix overlinking
	sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool

	make V=1
	make DESTDIR=$PKG install

	# remove junk
	rm -r $PKG/usr/share/*doc $PKG/usr/lib/*.la
}
