# Description: Vulkan Header files and API registry
# URL:         https://www.khronos.org/vulkan/

name=vulkan-headers
version=1.4.328.1
release=1

# If version has 3 dots (a.b.c.d), it's a release; otherwise it's a tag
case $version in
*.*.*.*)
	_srcdir=Vulkan-Headers-vulkan-sdk-$version
	source=https://github.com/KhronosGroup/Vulkan-Headers/archive/refs/tags/vulkan-sdk-$version.tar.gz
	;;
*.*.*)
	_srcdir=Vulkan-Headers-$version
	source=$name-$version.tar.gz::https://github.com/KhronosGroup/Vulkan-Headers/archive/refs/tags/v$version.tar.gz
	;;
esac

build() {
	cmake -S ${_srcdir} -B build -G Ninja \
		-D CMAKE_INSTALL_PREFIX=/usr \
		-D CMAKE_INSTALL_LIBDIR=lib \
		-D CMAKE_BUILD_TYPE=Release \

	ninja -C build -j ${JOBS:-1} -v
	DESTDIR=$PKG ninja -C build install
}
